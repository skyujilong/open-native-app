<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>测试用例</title>
        <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, width=device-width" />
        <style media="screen">
            a{
                font-size: 2em;
            }
        </style>
    </head>
    <body>
        <a href="javascript:void(0);">open app</a>
        <a href="sinablog://blog.sina.com.cn?from=sinacn&jumptype=adetail&articleid=7ffe016f0102x21w&bloguid=2147352943">url open !!!</a>
        <div id="msg" style="font-size:2em;"></div>
        <script>
            var script = window.document.createElement('script');
            script.src = '//test.sina.com.cn:8089/index.js?v='+ new Date().getTime();
            document.body.appendChild(script);
        </script>
        <!-- <script src="./index.js" charset="utf-8"></script> -->
        <script type="text/javascript">
            // document.querySelector('a').href ='sinablog://blog.sina.com.cn?from=sinacn&jumptype=adetail&articleid=7ffe016f0102x21w&bloguid=2147352943';
            document.querySelector('a').addEventListener('click',function(e){
                e.preventDefault();
                openApp.open('sinablog://blog.sina.com.cn?from=sinacn&jumptype=adetail&articleid=7ffe016f0102x21w&bloguid=2147352943',(code)=>{
                    alert(code);
                },function(){
                    alert('调用失败');
                    console.log('error');
                    // document.querySelector('#msg').innerHTML = '调用失败了！！！';
                }, 3500);
            },false);
            
            // var evt = new MouseEvent('click', {
            //         view: window,
            //         bubbles: true,
            //         cancelable: true
            //     });
            // document.querySelector('a').dispatchEvent(evt);
            var url = 'sinablog://blog.sina.com.cn?from=sinacn&jumptype=adetail&articleid=7ffe016f0102x21w&bloguid=2147352943';
            // var iframe = document.createElement('iframe');
            // iframe.src = [
            //     'javascript:document.write("',
            //         '<html>',
            //             '<head>',
            //                 // '<script>',
            //                 //     ';location.href=\"',url,'\"',
            //                 // '<\/script>',
            //             '</head>',
            //             '<body>',
            //                 '<a href=\"', url, '\">open</a>',
            //                 // '<script>',
            //                 //     ';document.querySelector(\"a\").dispatchEvent(new MouseEvent(\"click\"));',
            //                 // '<\/script>',
            //             '</body>',
            //         '</html>',
            //     '");'
            // ].join("");
            // iframe.src=[
            //     'javascript:document.write(\'',
            //         '<html><body>',
            //             '<a href="',url,'">open</a>',
            //             '<script>',
            //                 'document.querySelector("a").dispatchEvent(new MouseEvent("click"));',    
            //             ,'<\/script>',
            //             '<script>location.href="',url,'"<\/script>',    
            //         ,'</body></html>',
            //     '\')'
            // ].join('');
            // document.body.appendChild(iframe);
// document.querySelector('a')
        </script>
        <script>
            document.write('<h1>' + navigator.userAgent + '</h1>');
        </script>
    </body>
</html>
